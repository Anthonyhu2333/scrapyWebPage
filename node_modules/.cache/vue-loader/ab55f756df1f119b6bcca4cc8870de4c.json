{"remainingRequest":"/Users/anthony/Desktop/data_collect_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anthony/Desktop/data_collect_web/src/components/FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anthony/Desktop/data_collect_web/src/components/FileUpload.vue","mtime":1622358157000},{"path":"/Users/anthony/Desktop/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anthony/Desktop/data_collect_web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/anthony/Desktop/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anthony/Desktop/data_collect_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZEZpbGVWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5LiK5Lyg5paH5Lu25pe26YCJ5oup55qE5paH5Lu2bGlzdAogICAgICBmaWxlOiBbXSwKICAgICAgLy8g6aG16Z2i5pi+56S655qE5pe25YCZ55qEZmlsZeS/oeaBrwogICAgICBmaWxlSW5mbzogW3sKICAgICAgICBmaWxlTmFtZTogJ+aWh+S7tuWQjeensCcsCiAgICAgICAgZmlsZVVybDogJ1VybCcKICAgICAgfSwgewogICAgICAgIGZpbGVOYW1lOiAn5paH5Lu25ZCN56ewJywKICAgICAgICBmaWxlVXJsOiAnIFVybCcKICAgICAgfV0KICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXRGaWxlTGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRGaWxlTGlzdCAoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnbGlzdEZpbGVzJykKICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5paH5Lu26I635Y+W5aSx6LSlJykKICAgICAgfQogICAgICB0aGlzLmZpbGVJbmZvID0gcmVzLmVudGl0eQogICAgfSwKICAgIGFkZEZpbGUgKCkgewogICAgICB0aGlzLmFkZEZpbGVWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIHJlc2V0Rm9ybSAoKSB7CgogICAgfSwKICAgIC8vIOaWh+S7tuS4iuS8oOeahOaWueazlQogICAgLy8g5paH5Lu25LiL6L295oyJ6ZKuCiAgICBhc3luYyBkb3dubG9hZCAoRmlsZSkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoYGRvd25sb2FkP2lkPSR7RmlsZS5pZH1gKQogICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIGlmIChyZXMuY29kZSAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuS4i+i9veWksei0pScpCiAgICAgIH0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmlofku7bkuIvovb3miJDlip8nKQogICAgfSwKICAgIC8vIOaWh+S7tuWIoOmZpOaMiemSrgogICAgYXN5bmMgZGVsZXRlRmlsZSAoRmlsZSkgewogICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgcGFyYW1zLmFwcGVuZCgnaWQnLCBGaWxlLmlkKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCdkZWxldGVGaWxlJywgcGFyYW1zKQogICAgICBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKUnKQogICAgICB9CiAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKQogICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKQogICAgfQogIH0KfQo="},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileUpload.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n    <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n    <el-breadcrumb-item>采集设备管理</el-breadcrumb-item>\n    <el-breadcrumb-item>文件上传下载</el-breadcrumb-item>\n  </el-breadcrumb>\n  <el-card>\n    <el-upload action=\"http://localhost:8080/uploadFile\">\n      <el-button type=\"primary\">上传文件</el-button>\n    </el-upload>\n    <el-table :data=\"fileInfo\" stripe border style=\"width: 100%\">\n      <el-table-column type=\"index\"></el-table-column>\n      <el-table-column prop=\"fileName\" label=\"文件名称\"> </el-table-column>\n      <el-table-column label=\"文件链接\">\n        <template slot-scope=\"scope\">\n          <el-button icon = \"el-icon-download\" @click = 'download(scope.row)'></el-button>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"danger\" icon=\"el-icon-delete\" @click = \"deleteFile(scope.row)\"></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </el-card>\n\n</div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      addFileVisible: false,\n      // 上传文件时选择的文件list\n      file: [],\n      // 页面显示的时候的file信息\n      fileInfo: [{\n        fileName: '文件名称',\n        fileUrl: 'Url'\n      }, {\n        fileName: '文件名称',\n        fileUrl: ' Url'\n      }]\n    }\n  },\n  created () {\n    this.getFileList()\n  },\n  methods: {\n    async getFileList () {\n      const { data: res } = await this.$http.get('listFiles')\n      if (res.code !== 200) {\n        return this.$message.error('文件获取失败')\n      }\n      this.fileInfo = res.entity\n    },\n    addFile () {\n      this.addFileVisible = true\n    },\n    resetForm () {\n\n    },\n    // 文件上传的方法\n    // 文件下载按钮\n    async download (File) {\n      const { data: res } = await this.$http.get(`download?id=${File.id}`)\n      console.log(res)\n      if (res.code !== 200) {\n        return this.$message.error('文件下载失败')\n      }\n      this.$message.success('文件下载成功')\n    },\n    // 文件删除按钮\n    async deleteFile (File) {\n      const params = new URLSearchParams()\n      params.append('id', File.id)\n      const { data: res } = await this.$http.post('deleteFile', params)\n      if (res.code !== 200) {\n        return this.$message.error('删除失败')\n      }\n      this.getFileList()\n      return this.$message.success('删除成功')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-breadcrumb{\n  margin-bottom:15px;\n  font-size: 12px;\n}\n.el-card{\n  box-shadow: 0 1px 1px rgba(0,0,0,0.25)!important;\n}\n</style>\n"]}]}