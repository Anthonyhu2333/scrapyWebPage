{"remainingRequest":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuxue/Desktop/web/data_collect_web/src/components/DB/DBStore.vue?vue&type=style&index=0&id=4cff2f4b&scoped=true&lang=css&","dependencies":[{"path":"/Users/yuxue/Desktop/web/data_collect_web/src/components/DB/DBStore.vue","mtime":1624104871016},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWJyZWFkY3J1bWJ7CiAgbWFyZ2luLWJvdHRvbToxNXB4OwogIGZvbnQtc2l6ZTogMTJweDsKfQouZWwtY2FyZHsKICBib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLDAsMCwwLjI1KSFpbXBvcnRhbnQ7Cn0KLmVsLWlucHV0LW51bWJlcnsKICB3aWR0aDogNzVweDsKfQo="},{"version":3,"sources":["DBStore.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DBStore.vue","sourceRoot":"src/components/DB","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>采集设备管理</el-breadcrumb-item>\n      <el-breadcrumb-item>远程数据库</el-breadcrumb-item>\n      <el-breadcrumb-item>数据入库与告警</el-breadcrumb-item>\n      <el-breadcrumb-item>数据入库</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <el-table :data = 'canalList' stripe border style=\"width: 100%\">\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column prop=\"additionalInfo\" label=\"实例名称\"></el-table-column>\n        <el-table-column prop=\"canal-Ip\" label=\"canal-Ip\"></el-table-column>\n        <el-table-column prop=\"port\" label=\"canal-Port\"></el-table-column>\n        <el-table-column prop=\"destination\" label=\"监控队列名称\"></el-table-column>\n        <el-table-column prop=\"topic\" label=\"Kafka-Topic\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" @click=\"dataStore(scope.row)\">数据同步</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-dialog title=\"数据同步\" :visible.sync= \"dataStoreVisible\" width=\"50%\" @close=\"resetForm()\">\n        <el-form :model=\"dropInfo\" :rules= \"addruleForm\" ref=\"addFormRef\" label-width=\"100px\" margin-top=\"3px\">\n          <el-row>\n            <el-col>同步定时设置：</el-col>\n            <e-col><el-input-number size=\"mini\" v-model=\"dropInfo.time.day\" controls-position=\"right\" :min=\"0\"></el-input-number><span>天</span></e-col>\n            <e-col><el-input-number size=\"mini\" v-model=\"dropInfo.time.hour\" controls-position=\"right\" :min=\"0\"></el-input-number><span>时</span></e-col>\n            <e-col><el-input-number size=\"mini\" v-model=\"dropInfo.time.min\" controls-position=\"right\" :min=\"0\"></el-input-number><span>分</span></e-col>\n            <e-col><el-input-number size=\"mini\" v-model=\"dropInfo.time.second\" controls-position=\"right\" :min=\"0\"></el-input-number><span>秒</span></e-col>\n          </el-row>\n        </el-form>\n        <span slot=\"footer\">\n          <el-button @click=\"dataStoreVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"dataStoreSubmit(dropInfo)\">同步</el-button>\n        </span>\n      </el-dialog>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      canalList: [\n        {\n          additionalInfo: '1',\n          serverAddress: '2',\n          port: '3',\n          destination: '4',\n          topic: '5'\n        }\n      ],\n      // 选择的数据表的名字\n      dbTableList: [\n        '1', '2', '3'\n      ],\n      // 点击数据入库按钮弹出的对话框\n      dataStoreVisible: false,\n      // 爬虫保存数据案例\n      stringInfo: '',\n      dropInfo: {\n        topic: '',\n        time: {\n          day: '',\n          hour: '',\n          min: '',\n          second: ''\n        }\n      },\n      topics: {\n        1: '1',\n        '2-topic': 'topic'\n      },\n      tableNames: ['1', '2', '3']\n    }\n  },\n  created () {\n    this.getCanalList()\n    this.getDBTableList()\n  },\n  methods: {\n    async getCanalList () {\n      const { data: res } = await this.$http.get('listCanal')\n      console.log(res)\n      if (res.code !== 200) {\n        return this.$message.error('数据库同步实例获取失败')\n      }\n      this.canalList = res.entity\n    },\n    async dataStore (website) {\n      this.dataStoreVisible = true\n      console.log(website)\n      this.dropInfo.topic = website.topic\n    },\n    async dataStoreSubmit (dropInfo) {\n      // datastore\n      console.log(dropInfo)\n      const time = (dropInfo.time.second) + dropInfo.time.min * 60 + dropInfo.time.hour * 3600 + dropInfo.time.day * 3600 * 24\n      const params = new URLSearchParams()\n      params.append('topic', dropInfo.topic)\n      params.append('seconds', time)\n      const { data: res } = await this.$http.post('insertKafkaIntoDBTable', params)\n      if (res.code !== 200) {\n        return this.$message.error('数据库同步失败')\n      }\n      this.$message.success('数据同步成功')\n    },\n    resetForm () {\n      // 重置新增页面的数据\n      console.log(this.$refs.addFormRef)\n      this.$refs.addFormRef.resetFields()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-breadcrumb{\n  margin-bottom:15px;\n  font-size: 12px;\n}\n.el-card{\n  box-shadow: 0 1px 1px rgba(0,0,0,0.25)!important;\n}\n.el-input-number{\n  width: 75px;\n}\n</style>\n"]}]}