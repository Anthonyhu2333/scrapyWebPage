{"remainingRequest":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuxue/Desktop/web/data_collect_web/src/components/Device.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuxue/Desktop/web/data_collect_web/src/components/Device.vue","mtime":1622362452492},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOa3u+WKoOiuvuWkh+aMiemSrueahOWvueivneahhgogICAgICBhZGREZXZpY2VWaXNpYmxlOiBmYWxzZSwKICAgICAgdG90YWw6IDAsCiAgICAgIHF1ZXJ5SW5mbzogewogICAgICAgIHF1ZXJ5OiAnJywKICAgICAgICBwYWdlbnVtOiAxLAogICAgICAgIHBhZ2VzaXplOiA1CiAgICAgIH0sCgogICAgICBkZXZpY2U6IFt7CiAgICAgICAgc3lzdGVtVHlwZTogJ2hoaCcsCiAgICAgICAgaXA6ICd1cmwnLAogICAgICAgIHN5c3RlbU5hbWU6ICdoaGgnLAogICAgICAgIHBvcnQ6IDAsCiAgICAgICAgc3RhdGU6ICdoaGhoJwogICAgICB9XSwKICAgICAgc3lzdGVtVHlwZU9wdGlvbjogWwogICAgICAgIHsgbGFiZWw6ICfnvZHnq5nniKzomasnLCBpbmRleDogJzEnLCBuYW1lOiAn572R56uZJyB9LAogICAgICAgIHsgbGFiZWw6ICforr7lpIcnLCBpbmRleDogJzInLCBuYW1lOiAn6K6+5aSHJyB9LAogICAgICAgIHsgbGFiZWw6ICfov5znqIvmlbDmja7lupMnLCBpbmRleDogJzMnLCBuYW1lOiAn6L+c56iL5pWw5o2u5bqTJyB9LAogICAgICAgIHsgbGFiZWw6ICfov5znqIvmlbDmja7mlofku7YnLCBpbmRleDogJzQnLCBuYW1lOiAn6L+c56iL5pWw5o2u5paH5Lu2JyB9CiAgICAgIF0sCiAgICAgIHN5c3RlbUluZm86IHsKICAgICAgICAvLyDmt7vliqDorr7lpIfnmoTooajljZXlhoXlrrkKICAgICAgICBzeXN0ZW1UeXBlOiAnJywKICAgICAgICBzeXN0ZW1OYW1lOiAnJywKICAgICAgICBpcDogJycKICAgICAgfSwKICAgICAgYWRkcnVsZUZvcm06IHsKICAgICAgICBzeXN0ZW1OYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6K6+5aSH5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogMywgbWF4OiAxMCwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCA1IOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBpcDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpWlw5Zyw5Z2AJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHN5c3RlbVR5cGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXorr7lpIflkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQoKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXREZXZpY2VsaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldERldmljZWxpc3QgKCkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2xpc3RTeXN0ZW1zJykKICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W6K6+5aSH5YiX6KGo5aSx6LSlJykKICAgICAgfQogICAgICB0aGlzLmRldmljZSA9IHJlcy5lbnRpdHkKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZXNpemUgPSB2YWwKICAgICAgdGhpcy5nZXREZXZpY2VsaXN0KCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZW51bSA9IHZhbAogICAgICB0aGlzLmdldERldmljZWxpc3QoKQogICAgfSwKICAgIHJlc2V0Rm9ybSAoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybVJlZi5yZXNldEZpZWxkcygpCiAgICB9LAogICAgYXN5bmMgc3lzdGVtU3RhdGVDaGFuZ2UgKHN0YXRlKSB7CiAgICAgIHRoaXMuZGV2aWNlLnN0YXRlID0gc3RhdGUKICAgICAgY29uc29sZS5sb2coc3RhdGUpCiAgICB9LAogICAgYWRkU3lzdGVtICgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5zeXN0ZW1JbmZvKQogICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHJldHVybgogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJ2FkZFJlbW90ZVN5c3RlbUlzT2snLCB0aGlzLnN5c3RlbUluZm8pCiAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCforr7lpIfmt7vliqDlpLHotKUnKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6K6+5aSH5re75Yqg5oiQ5YqfJykKICAgICAgICB0aGlzLmFkZERldmljZVZpc2libGUgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGFzeW5jIHRlc3RJcEFuZFBvcnQgKGRldmljZWluZm8pIHsKICAgICAgY29uc29sZS5sb2coZGV2aWNlaW5mbykKICAgICAgdGhpcy5hZGREZXZpY2VWaXNpYmxlID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Device.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Device.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>采集设备管理</el-breadcrumb-item>\n      <el-breadcrumb-item>系统设备</el-breadcrumb-item>\n      <el-breadcrumb-item>设备状态展示</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <el-button type=\"primary\" @click=\"addDeviceVisible = true\">添加设备</el-button>\n      <el-dialog title=\"添加设备\" :visible.sync=\"addDeviceVisible\" width=\"50%\"  @close=\"resetForm()\">\n        <el-form v-model=\"systemInfo\" :rules=\"addruleForm\" ref=\"addFormRef\" label-width=\"100px\">\n          <el-form-item label=\"设备类型\" prop=\"systemType\">\n            <el-select v-model=\"systemInfo.systemType\" placeholder=\"请选择设备类型\">\n              <el-option  v-for= \"item in systemTypeOption\" :key=\"item.index\" :label =\"item.label\" :value = \"item.name\" @click = \"console.log(item)\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"systemName\">\n            <el-input v-model=\"systemInfo.systemName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"ip/url\" prop=\"ip\">\n            <el-input v-model=\"systemInfo.ip\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addDeviceVisible = false\">取 消</el-button>\n          <el-button type=\"warning\" @click=\"testIpAndPort(systemInfo)\">测试联通</el-button>\n          <el-button type=\"primary\" @click=\"addSystem()\">添加设备</el-button>\n        </span>\n      </el-dialog>\n      <el-table :data=\"device\" stripe border style=\"width: 100%\">\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column prop=\"systemName\" label=\"设备名称\"> </el-table-column>\n        <el-table-column prop=\"systemType\" label=\"设备类型\"> </el-table-column>\n        <el-table-column prop=\"ip\" label=\"ip地址\"></el-table-column>\n        <el-table-column prop=\"state\" label=\"状态\">\n          <!-- <template slot = \"scope\">\n            <el-switch v-model=\"scope.row.state\" @change=\"systemStateChange(scope.row)\">\n            </el-switch>\n          </template> -->\n        </el-table-column>\n      </el-table>\n      <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :page-sizes=\"[1, 2, 5, 10]\"\n      :current-page=\"queryInfo.pagenum\"\n      :page-size=\"queryInfo.pagesize\"\n      :total = total\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      >\n    </el-pagination>\n    </el-card>\n    </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      // 添加设备按钮的对话框\n      addDeviceVisible: false,\n      total: 0,\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 5\n      },\n\n      device: [{\n        systemType: 'hhh',\n        ip: 'url',\n        systemName: 'hhh',\n        port: 0,\n        state: 'hhhh'\n      }],\n      systemTypeOption: [\n        { label: '网站爬虫', index: '1', name: '网站' },\n        { label: '设备', index: '2', name: '设备' },\n        { label: '远程数据库', index: '3', name: '远程数据库' },\n        { label: '远程数据文件', index: '4', name: '远程数据文件' }\n      ],\n      systemInfo: {\n        // 添加设备的表单内容\n        systemType: '',\n        systemName: '',\n        ip: ''\n      },\n      addruleForm: {\n        systemName: [\n          { required: true, message: '请输入设备名称', trigger: 'blur' },\n          { min: 3, max: 10, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n        ],\n        ip: [\n          { required: true, message: '请输入ip地址', trigger: 'blur' }\n        ],\n        systemType: [\n          { required: true, message: '请输入设备名称', trigger: 'blur' }\n        ]\n      }\n\n    }\n  },\n  created () {\n    this.getDevicelist()\n  },\n  methods: {\n    async getDevicelist () {\n      const { data: res } = await this.$http.get('listSystems')\n      if (res.code !== 200) {\n        return this.$message.error('获取设备列表失败')\n      }\n      this.device = res.entity\n    },\n    handleSizeChange (val) {\n      this.queryInfo.pagesize = val\n      this.getDevicelist()\n    },\n    handleCurrentChange (val) {\n      this.queryInfo.pagenum = val\n      this.getDevicelist()\n    },\n    resetForm () {\n      this.$refs.addFormRef.resetFields()\n    },\n    async systemStateChange (state) {\n      this.device.state = state\n      console.log(state)\n    },\n    addSystem () {\n      console.log(this.systemInfo)\n      this.$refs.addFormRef.validate(async valid => {\n        if (!valid) return\n        const { data: res } = await this.$http.post('addRemoteSystemIsOk', this.systemInfo)\n        if (res.code !== 200) return this.$message.error('设备添加失败')\n        this.$message.success('设备添加成功')\n        this.addDeviceVisible = false\n      })\n    },\n    async testIpAndPort (deviceinfo) {\n      console.log(deviceinfo)\n      this.addDeviceVisible = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-breadcrumb{\n  margin-bottom:15px;\n  font-size: 12px;\n}\n.el-card{\n  box-shadow: 0 1px 1px rgba(0,0,0,0.25)!important;\n}\n</style>\n"]}]}