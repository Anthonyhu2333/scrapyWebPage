{"remainingRequest":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuxue/Desktop/web/data_collect_web/src/components/Device.vue?vue&type=style&index=0&id=7cf616e2&scoped=true&lang=css&","dependencies":[{"path":"/Users/yuxue/Desktop/web/data_collect_web/src/components/Device.vue","mtime":1622362452492},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuxue/Desktop/web/data_collect_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC1icmVhZGNydW1iewogIG1hcmdpbi1ib3R0b206MTVweDsKICBmb250LXNpemU6IDEycHg7Cn0KLmVsLWNhcmR7CiAgYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yNSkhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["Device.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Device.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>采集设备管理</el-breadcrumb-item>\n      <el-breadcrumb-item>系统设备</el-breadcrumb-item>\n      <el-breadcrumb-item>设备状态展示</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <el-button type=\"primary\" @click=\"addDeviceVisible = true\">添加设备</el-button>\n      <el-dialog title=\"添加设备\" :visible.sync=\"addDeviceVisible\" width=\"50%\"  @close=\"resetForm()\">\n        <el-form v-model=\"systemInfo\" :rules=\"addruleForm\" ref=\"addFormRef\" label-width=\"100px\">\n          <el-form-item label=\"设备类型\" prop=\"systemType\">\n            <el-select v-model=\"systemInfo.systemType\" placeholder=\"请选择设备类型\">\n              <el-option  v-for= \"item in systemTypeOption\" :key=\"item.index\" :label =\"item.label\" :value = \"item.name\" @click = \"console.log(item)\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"设备名称\" prop=\"systemName\">\n            <el-input v-model=\"systemInfo.systemName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"ip/url\" prop=\"ip\">\n            <el-input v-model=\"systemInfo.ip\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addDeviceVisible = false\">取 消</el-button>\n          <el-button type=\"warning\" @click=\"testIpAndPort(systemInfo)\">测试联通</el-button>\n          <el-button type=\"primary\" @click=\"addSystem()\">添加设备</el-button>\n        </span>\n      </el-dialog>\n      <el-table :data=\"device\" stripe border style=\"width: 100%\">\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column prop=\"systemName\" label=\"设备名称\"> </el-table-column>\n        <el-table-column prop=\"systemType\" label=\"设备类型\"> </el-table-column>\n        <el-table-column prop=\"ip\" label=\"ip地址\"></el-table-column>\n        <el-table-column prop=\"state\" label=\"状态\">\n          <!-- <template slot = \"scope\">\n            <el-switch v-model=\"scope.row.state\" @change=\"systemStateChange(scope.row)\">\n            </el-switch>\n          </template> -->\n        </el-table-column>\n      </el-table>\n      <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :page-sizes=\"[1, 2, 5, 10]\"\n      :current-page=\"queryInfo.pagenum\"\n      :page-size=\"queryInfo.pagesize\"\n      :total = total\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      >\n    </el-pagination>\n    </el-card>\n    </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      // 添加设备按钮的对话框\n      addDeviceVisible: false,\n      total: 0,\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 5\n      },\n\n      device: [{\n        systemType: 'hhh',\n        ip: 'url',\n        systemName: 'hhh',\n        port: 0,\n        state: 'hhhh'\n      }],\n      systemTypeOption: [\n        { label: '网站爬虫', index: '1', name: '网站' },\n        { label: '设备', index: '2', name: '设备' },\n        { label: '远程数据库', index: '3', name: '远程数据库' },\n        { label: '远程数据文件', index: '4', name: '远程数据文件' }\n      ],\n      systemInfo: {\n        // 添加设备的表单内容\n        systemType: '',\n        systemName: '',\n        ip: ''\n      },\n      addruleForm: {\n        systemName: [\n          { required: true, message: '请输入设备名称', trigger: 'blur' },\n          { min: 3, max: 10, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n        ],\n        ip: [\n          { required: true, message: '请输入ip地址', trigger: 'blur' }\n        ],\n        systemType: [\n          { required: true, message: '请输入设备名称', trigger: 'blur' }\n        ]\n      }\n\n    }\n  },\n  created () {\n    this.getDevicelist()\n  },\n  methods: {\n    async getDevicelist () {\n      const { data: res } = await this.$http.get('listSystems')\n      if (res.code !== 200) {\n        return this.$message.error('获取设备列表失败')\n      }\n      this.device = res.entity\n    },\n    handleSizeChange (val) {\n      this.queryInfo.pagesize = val\n      this.getDevicelist()\n    },\n    handleCurrentChange (val) {\n      this.queryInfo.pagenum = val\n      this.getDevicelist()\n    },\n    resetForm () {\n      this.$refs.addFormRef.resetFields()\n    },\n    async systemStateChange (state) {\n      this.device.state = state\n      console.log(state)\n    },\n    addSystem () {\n      console.log(this.systemInfo)\n      this.$refs.addFormRef.validate(async valid => {\n        if (!valid) return\n        const { data: res } = await this.$http.post('addRemoteSystemIsOk', this.systemInfo)\n        if (res.code !== 200) return this.$message.error('设备添加失败')\n        this.$message.success('设备添加成功')\n        this.addDeviceVisible = false\n      })\n    },\n    async testIpAndPort (deviceinfo) {\n      console.log(deviceinfo)\n      this.addDeviceVisible = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-breadcrumb{\n  margin-bottom:15px;\n  font-size: 12px;\n}\n.el-card{\n  box-shadow: 0 1px 1px rgba(0,0,0,0.25)!important;\n}\n</style>\n"]}]}