(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"05a4":function(e,t,r){},"0e1b":function(e,t,r){"use strict";r("05a4")},1:function(e,t){},1314:function(e,t,r){},"1ddd":function(e,t,r){"use strict";var n=r("d844"),a=r("7f00"),s=(r("39c9"),r("2877")),o=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"419a96be",null);t["default"]=o.exports},"1f18":function(e,t,r){"use strict";r("9a92")},"32ac":function(e,t,r){"use strict";r("8f40")},"39c9":function(e,t,r){"use strict";r("dc69")},"3d82":function(e,t,r){"use strict";r("1314")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],o={name:"app"},i=o,l=r("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null),u=c.exports,p=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("div",[r("span",[e._v("水土保持数据采集系统")])]),r("el-button",{attrs:{type:"info"},on:{click:e.exit}},[e._v("退出")])],1),r("el-container",{staticClass:"asider"},[r("el-aside",{attrs:{width:e.iscollopse?"64px":"270px",height:"100%"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggle}},[e._v("|||")]),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":"true",collapse:e.iscollopse,router:"","default-active":e.activePath}},e._l(e.sideBarData,(function(t){return r("el-submenu",{key:t.index,attrs:{index:t.index}},[r("template",{on:{click:function(r){return e.console.log(t.index)}},slot:"title"},[r("i",{class:t.icon}),r("span",[e._v(e._s(t.name)+" ")])]),e._l(t.children,(function(n){return r("li",{key:n.index},[n.children.length>0?r("el-submenu",{attrs:{index:n.index}},[r("template",{on:{click:function(r){return e.console.log(t.index)}},slot:"title"},[r("i",{class:n.icon}),r("span",[e._v(e._s(n.name)+" ")])]),e._l(n.children,(function(t){return r("li",{key:t.index},[t.children.length>0?r("el-submenu",{attrs:{index:t.index}},[r("template",{slot:"title"},[r("i",{class:t.icon}),r("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(n){return r("el-menu-item",{key:n.index,attrs:{index:n.index},on:{click:function(r){return e.saveNavState(t.index)}}},[r("i",{class:n.icon}),r("span",[e._v(e._s(n.name))])])}))],2):e._e(),0==t.children.length?r("el-menu-item",{attrs:{index:t.index}},[[r("i",{class:t.icon}),r("span",[e._v(e._s(t.name))])]],2):e._e()],1)}))],2):e._e(),0==n.children.length?r("el-menu-item",{attrs:{index:n.index}},[[r("i",{class:n.icon}),r("span",[e._v(e._s(n.name))])]],2):e._e()],1)}))],2)})),1)],1),r("el-main",[r("router-view")],1)],1)],1)},m=[],f={data:function(){return{menulist:[],iscollopse:!1,activePath:"",sideBarData:[{name:"采集设备管理",index:"menu1",icon:"el-icon-menu",children:[{name:"系统设备",index:"menu1-1",icon:"el-icon-menu",children:[{name:"设备状态展示",index:"/deviceManger",icon:"el-icon-menu",children:[]},{name:"数据入库告警",index:"menu1-1-2",icon:"el-icon-menu",children:[]},{name:"方案配置",index:"menu-1-3",icon:"el-icon-menu",children:[]}]},{name:"网站爬虫",index:"menu1-2",icon:"el-icon-menu",children:[{name:"网站爬虫信息展示",index:"/websitesManger",icon:"el-icon-menu",children:[]},{name:"数据入库与告警",index:"menu1-2-2",icon:"el-icon-menu",children:[{name:"数据入库",index:"/dataStore",icon:"el-icon-menu"},{name:"数据告警",index:"/dataAlarm",icon:"el-icon-menu"}]},{name:"爬虫配置",index:"/scrapyconfig",icon:"el-icon-menu",children:[]}]},{name:"远程数据库",index:"menu1-3",icon:"el-icon-menu",children:[{name:"数据入库与告警",index:"menu1-2-2",icon:"el-icon-menu",children:[{name:"数据入库",index:"/DBStore",icon:"el-icon-menu"},{name:"数据告警",index:"/DBAlarm",icon:"el-icon-menu"}]},{name:"数据库同步配置",index:"/DBconfig",icon:"el-icon-menu",children:[]}]},{name:"远程数据文件",index:"menu1-4",icon:"el-icon-menu",children:[]},{name:"文件上传下载",index:"/fileUploadAndDownload",icon:"el-icon-menu",children:[]}]}]}},methods:{exit:function(){window.sessionStorage.clear(),this.$router.push("/login")},toggle:function(){this.iscollopse=!this.iscollopse},saveNavState:function(e){this.activePath=e}}},b=f,h=(r("929f"),Object(l["a"])(b,d,m,!1,null,"45fef3d2",null)),y=h.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("系统设备")]),r("el-breadcrumb-item",[e._v("设备状态展示")])],1),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDeviceVisible=!0}}},[e._v("添加设备")]),r("el-dialog",{attrs:{title:"添加设备",visible:e.addDeviceVisible,width:"50%"},on:{"update:visible":function(t){e.addDeviceVisible=t},close:function(t){return e.resetForm()}}},[r("el-form",{ref:"addFormRef",attrs:{rules:e.addruleForm,"label-width":"100px"},model:{value:e.systemInfo,callback:function(t){e.systemInfo=t},expression:"systemInfo"}},[r("el-form-item",{attrs:{label:"设备类型",prop:"systemType"}},[r("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.systemInfo.systemType,callback:function(t){e.$set(e.systemInfo,"systemType",t)},expression:"systemInfo.systemType"}},e._l(e.systemTypeOption,(function(t){return r("el-option",{key:t.index,attrs:{label:t.label,value:t.name},on:{click:function(r){return e.console.log(t)}}})})),1)],1),r("el-form-item",{attrs:{label:"设备名称",prop:"systemName"}},[r("el-input",{model:{value:e.systemInfo.systemName,callback:function(t){e.$set(e.systemInfo,"systemName",t)},expression:"systemInfo.systemName"}})],1),r("el-form-item",{attrs:{label:"ip/url",prop:"ip"}},[r("el-input",{model:{value:e.systemInfo.ip,callback:function(t){e.$set(e.systemInfo,"ip",t)},expression:"systemInfo.ip"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDeviceVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.testIpAndPort(e.systemInfo)}}},[e._v("测试联通")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSystem()}}},[e._v("添加设备")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.device,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"systemName",label:"设备名称"}}),r("el-table-column",{attrs:{prop:"systemType",label:"设备类型"}}),r("el-table-column",{attrs:{prop:"ip",label:"ip地址"}}),r("el-table-column",{attrs:{prop:"state",label:"状态"}})],1),r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],"current-page":e.queryInfo.pagenum,"page-size":e.queryInfo.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},g=[],w=r("1da1"),I=(r("96cf"),{data:function(){return{addDeviceVisible:!1,total:0,queryInfo:{query:"",pagenum:1,pagesize:5},device:[{systemType:"hhh",ip:"url",systemName:"hhh",port:0,state:"hhhh"}],systemTypeOption:[{label:"网站爬虫",index:"1",name:"网站"},{label:"设备",index:"2",name:"设备"},{label:"远程数据库",index:"3",name:"远程数据库"},{label:"远程数据文件",index:"4",name:"远程数据文件"}],systemInfo:{systemType:"",systemName:"",ip:""},addruleForm:{systemName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],ip:[{required:!0,message:"请输入ip地址",trigger:"blur"}],systemType:[{required:!0,message:"请输入设备名称",trigger:"blur"}]}}},created:function(){this.getDevicelist()},methods:{getDevicelist:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listSystems");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取设备列表失败"));case 6:e.device=n.entity;case 7:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getDevicelist()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getDevicelist()},resetForm:function(){this.$refs.addFormRef.resetFields()},systemStateChange:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.device.state=e,console.log(e);case 2:case"end":return r.stop()}}),r)})))()},addSystem:function(){var e=this;console.log(this.systemInfo),this.$refs.addFormRef.validate(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("addRemoteSystemIsOk",e.systemInfo);case 4:if(n=t.sent,a=n.data,200===a.code){t.next=8;break}return t.abrupt("return",e.$message.error("设备添加失败"));case 8:e.$message.success("设备添加成功"),e.addDeviceVisible=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},testIpAndPort:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log(e),t.addDeviceVisible=!1;case 2:case"end":return r.stop()}}),r)})))()}}}),x=I,k=(r("3d82"),Object(l["a"])(x,v,g,!1,null,"7cf616e2",null)),S=k.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("网站爬虫")]),r("el-breadcrumb-item",[e._v("网站爬虫信息展示")])],1),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addWebsiteState()}}},[e._v("新增网站")]),r("el-dialog",{attrs:{title:"新增网站",visible:e.addWebsiteVisible,width:"50%"},on:{"update:visible":function(t){e.addWebsiteVisible=t},close:function(t){return e.resetForm()}}},[r("el-form",{ref:"addFormRef",attrs:{model:e.websitesInfo,rules:e.addruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"网站名称",prop:"websiteName"}},[r("el-input",{model:{value:e.websitesInfo.websiteName,callback:function(t){e.$set(e.websitesInfo,"websiteName",t)},expression:"websitesInfo.websiteName"}})],1),r("el-form-item",{attrs:{label:"url",prop:"url"}},[r("el-input",{model:{value:e.websitesInfo.url,callback:function(t){e.$set(e.websitesInfo,"url",t)},expression:"websitesInfo.url"}})],1),r("el-form-item",{attrs:{label:"爬虫选择",prop:"scrapySelect"}},[r("el-select",{attrs:{placeholder:"请选择爬虫"},model:{value:e.websitesInfo.scrapySelect,callback:function(t){e.$set(e.websitesInfo,"scrapySelect",t)},expression:"websitesInfo.scrapySelect"}},e._l(e.scrapy,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addWebsiteVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.testWebsite(e.websitesInfo.url)}}},[e._v("测试联通")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addWebsite()}}},[e._v("添加设备")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.websites,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"websiteName",label:"网站名称"}}),r("el-table-column",{attrs:{prop:"url",label:"网站url"}}),r("el-table-column",{attrs:{prop:"state",label:"网站状态"}}),r("el-table-column",{attrs:{prop:"offOrOn",label:"网站检测开关"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.stateOffOrOn(t.row)}},model:{value:t.row.offOrOn,callback:function(r){e.$set(t.row,"offOrOn",r)},expression:"scope.row.offOrOn"}})]}}])}),r("el-table-column",{attrs:{prop:"scrapySelect",label:"爬虫选择"}}),r("el-table-column",{attrs:{prop:"scrapyState",label:"爬虫状态"}}),r("el-table-column",{attrs:{prop:"scrapyOffOrOn",label:"爬虫开关"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.scrapyStateOffOrOn(t.row)}},model:{value:t.row.scrapyOffOrOn,callback:function(r){e.$set(t.row,"scrapyOffOrOn",r)},expression:"scope.row.scrapyOffOrOn"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editWebsite(t.row)}}}),r("el-dialog",{attrs:{title:"修改网站信息",visible:e.editWebsiteVisible,width:"50%"},on:{"update:visible":function(t){e.editWebsiteVisible=t},close:function(t){return e.resetEditForm()}}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editWebsiteInfo,rules:e.editRuleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"网站名称",prop:"websiteName"}},[r("el-input",{model:{value:e.editWebsiteInfo.websiteName,callback:function(t){e.$set(e.editWebsiteInfo,"websiteName",t)},expression:"editWebsiteInfo.websiteName"}})],1),r("el-form-item",{attrs:{label:"url",prop:"url"}},[r("el-input",{model:{value:e.editWebsiteInfo.url,callback:function(t){e.$set(e.editWebsiteInfo,"url",t)},expression:"editWebsiteInfo.url"}})],1),r("el-form-item",{attrs:{label:"爬虫选择",prop:"scrapySelect"}},[r("el-select",{attrs:{placeholder:"请选择爬虫"},model:{value:e.editWebsiteInfo.scrapySelect,callback:function(t){e.$set(e.editWebsiteInfo,"scrapySelect",t)},expression:"editWebsiteInfo.scrapySelect"}},e._l(e.scrapy,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editWebsiteVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editWebsiteSubmit(e.editWebsiteInfo)}}},[e._v("确 定")])],1)],1),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteWebsiteInfo(t.row)}}})]}}])})],1)],1)],1)},$=[],O=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{data:function(){return{editWebsiteInfo:{websiteName:"",url:"",scrapySelect:""},scrapy:["",""],editWebsiteVisible:!1,addWebsiteVisible:!1,websites:[{websiteName:"",url:"",state:"",offOrOn:!1,scrapySelect:"",scrapyState:"",scrapyOffOrOn:!1}],websitesInfo:{websiteName:"",url:"",state:"",scrapySelect:""},addruleForm:{websiteName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],url:[{required:!0,message:"请输入url地址",trigger:"blur"}],scrapySelect:[{required:!0,message:"请选择爬虫",trigger:"blur"}]},editRuleForm:{websiteName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],url:[{required:!0,message:"请输入url地址",trigger:"blur"}],scrapySelect:[{required:!0,message:"请选择爬虫",trigger:"blur"}]}}},created:function(){this.getWebsitelist()},methods:{resetEditForm:function(){console.log(this.$refs.editFormRef),this.$refs.editFormRef.resetFields()},getScrapyList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("selectScrapys");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("爬虫获取失败"));case 6:e.scrapy=n.entity;case 7:case"end":return t.stop()}}),t)})))()},addWebsiteState:function(){this.addWebsiteVisible=!0,this.getScrapyList()},editWebsiteSubmit:function(e){var t=this;this.$refs.editFormRef.validate(function(){var r=Object(w["a"])(regeneratorRuntime.mark((function r(n){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,t.$http.post("updateWebsite",e);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("编辑失败"));case 8:t.$message.success("编辑成功"),t.getWebsitelist(),t.editWebsiteVisible=!1;case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},editWebsite:function(e){this.editWebsiteVisible=!0,this.editWebsiteInfo=e},deleteWebsiteInfo:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$confirm("此操作将永久删除该条网站信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(n=r.sent,"confirm"===n){r.next=6;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 6:return a=new URLSearchParams,a.append("url",e.url),r.next=10,t.$http.post("deleteWebsite",a);case 10:if(s=r.sent,o=s.data,200===o.code){r.next=14;break}return r.abrupt("return",t.$message.error("删除失败"));case 14:t.$message.success("删除成功"),t.getWebsitelist();case 16:case"end":return r.stop()}}),r)})))()},addWebsite:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("addWebsite",e.websitesInfo);case 4:if(n=t.sent,a=n.data,200===a.code){t.next=8;break}return t.abrupt("return",e.$message.error("网站添加失败"));case 8:e.$message.success("网站添加成功"),e.getWebsitelist(),e.resetForm(),e.addWebsiteVisible=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.addFormRef.resetFields()},getWebsitelist:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listWebsites");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取网站列表失败"));case 6:e.websites=n.entity;case 7:case"end":return t.stop()}}),t)})))()},stateOffOrOn:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("url",e.url),r.next=4,t.$http.post("updateOffOrOn",n);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("操作失败"));case 8:setTimeout((function(e){t.getWebsitelist()}),2e3);case 9:case"end":return r.stop()}}),r)})))()},testWebsite:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("url",e),r.next=4,t.$http.post("testWebsiteIsOk",n);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("该url地址不可达"));case 8:t.$message.success("该url可达");case 9:case"end":return r.stop()}}),r)})))()},scrapyStateOffOrOn:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("scrapyName",e.scrapySelect),r.next=4,t.$http.post("openScrapyInstance",n);case 4:if(a=r.sent,s=a.data,500!==s.code){r.next=8;break}return r.abrupt("return",t.$message.error("命令执行失败"));case 8:case"end":return r.stop()}}),r)})))()}}}),R=O,N=(r("9e40"),Object(l["a"])(R,_,$,!1,null,"6fc520ca",null)),F=N.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("文件上传下载")])],1),r("el-card",[r("el-upload",{attrs:{action:"http://localhost:8080/uploadFile"}},[r("el-button",{attrs:{type:"primary"}},[e._v("上传文件")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileInfo,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),r("el-table-column",{attrs:{label:"文件链接"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(r){return e.download(t.row)}}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteFile(t.row)}}})]}}])})],1)],1)],1)},j=[],W={data:function(){return{addFileVisible:!1,file:[],fileInfo:[{fileName:"文件名称",fileUrl:"Url"},{fileName:"文件名称",fileUrl:" Url"}]}},created:function(){this.getFileList()},methods:{getFileList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listFiles");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("文件获取失败"));case 6:e.fileInfo=n.entity;case 7:case"end":return t.stop()}}),t)})))()},addFile:function(){this.addFileVisible=!0},resetForm:function(){},download:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("download?id=".concat(e.id));case 2:if(n=r.sent,a=n.data,console.log(a),200===a.code){r.next=7;break}return r.abrupt("return",t.$message.error("文件下载失败"));case 7:t.$message.success("文件下载成功");case 8:case"end":return r.stop()}}),r)})))()},deleteFile:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("id",e.id),r.next=4,t.$http.post("deleteFile",n);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("删除失败"));case 8:return t.getFileList(),r.abrupt("return",t.$message.success("删除成功"));case 10:case"end":return r.stop()}}),r)})))()}}},V=W,C=(r("6d14"),Object(l["a"])(V,L,j,!1,null,"59014cc0",null)),T=C.exports,D=r("1ddd"),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("爬虫配置")])],1),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addScrapyInstance()}}},[e._v("新增爬虫实例")]),r("el-dialog",{attrs:{title:"添加爬虫实例",visible:e.addScrapyInstanceVisible,width:"50%"},on:{"update:visible":function(t){e.addScrapyInstanceVisible=t},close:function(t){return e.resetScrpayInstanceForm()}}},[r("el-form",{ref:"addScrapyInstanceRef",attrs:{model:e.scrapyInstanceInfo,rules:e.addScrapyruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"实例名称",prop:"scrapyName"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.scrapyName,callback:function(t){e.$set(e.scrapyInstanceInfo,"scrapyName",t)},expression:"scrapyInstanceInfo.scrapyName"}})],1),r("el-form-item",{attrs:{label:"开启爬虫命令",prop:"openScrapyCommand"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.openScrapyCommand,callback:function(t){e.$set(e.scrapyInstanceInfo,"openScrapyCommand",t)},expression:"scrapyInstanceInfo.openScrapyCommand"}})],1),r("el-form-item",{attrs:{label:"关闭爬虫命令",prop:"closeScrapyCommand"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.closeScrapyCommand,callback:function(t){e.$set(e.scrapyInstanceInfo,"closeScrapyCommand",t)},expression:"scrapyInstanceInfo.closeScrapyCommand"}})],1),r("el-form-item",{attrs:{label:"上传文件",prop:"fileSavePath"}},[r("el-upload",{attrs:{action:"",limit:1,"show-file-list":"",drag:"","file-list":e.files,"http-request":e.uploadFile}},[r("i",{staticClass:"el-icon-upload"})])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addScrapyInstanceVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addScrapyInstanceSubmit()}}},[e._v("添加")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.scrapysList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"scrapyName",label:"爬虫实例名称"}}),r("el-table-column",{attrs:{prop:"fileSavePath",label:"爬虫文件保存路径"}}),r("el-table-column",{attrs:{prop:"openScrapyCommand",label:"爬虫开启命令"}}),r("el-table-column",{attrs:{prop:"closeScrapyCommand",label:"爬虫关闭命令"}}),r("el-table-column",{attrs:{prop:"topic",label:"保存队列"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editScrapyInstance(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteScrapyInstance(t.row)}}})]}}])})],1)],1)],1)},z=[],q={data:function(){return{addScrapyInstanceVisible:!1,scrapyInstanceInfo:{scrapyName:"",openScrapyCommand:"",closeScrapyCommand:"",fileSavePath:""},files:[],scrapysList:"",addScrapyruleForm:{scrapyName:[{required:!0,message:"请输入爬虫实例名称",trigger:"blur"}],scrapyCode:[{required:!0,message:"请输入爬虫实例执行命令",trigger:"blur"}]}}},created:function(){this.getScrapyList()},methods:{getScrapyList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listScrapyInstance");case 2:if(r=t.sent,n=r.data,console.log(n),200===n.code){t.next=7;break}return t.abrupt("return",e.$message.error("爬虫实例获取失败"));case 7:e.scrapysList=n.entity;case 8:case"end":return t.stop()}}),t)})))()},addScrapyInstance:function(){this.addScrapyInstanceVisible=!0},editScrapyInstance:function(e){console.log(e)},deleteScrapyInstance:function(e){console.log(e)},resetScrpayInstanceForm:function(){this.$refs.addScrapyInstanceRef.resetFields()},uploadFile:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.file,a=new window.FormData,a.append("file",n),r.next=5,t.$http.post("uploadScrapyFile",a);case 5:if(s=r.sent,o=s.data,200===o.code){r.next=9;break}return r.abrupt("return",t.$message.error("文件上传失败"));case 9:t.scrapyInstanceInfo.fileSavePath=o.entity;case 10:case"end":return r.stop()}}),r)})))()},addScrapyInstanceSubmit:function(){var e=this;this.$refs.addScrapyInstanceRef.validate(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("addScrapyInstance",e.scrapyInstanceInfo);case 4:if(n=t.sent,a=n.data,200===a.code){t.next=8;break}return t.abrupt("return",e.$message.error("爬虫添加失败"));case 8:e.$message.success("爬虫添加成功"),e.getScrapyList(),e.addScrapyInstanceVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},U=q,B=(r("32ac"),Object(l["a"])(U,P,z,!1,null,"1d8159ac",null)),A=B.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("网站爬虫")]),r("el-breadcrumb-item",[e._v("数据入库与告警")]),r("el-breadcrumb-item",[e._v("数据入库")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.websiteslist,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"websiteName",label:"网站名称"}}),r("el-table-column",{attrs:{prop:"url",label:"网站url"}}),r("el-table-column",{attrs:{prop:"state",label:"网站状态"}}),r("el-table-column",{attrs:{prop:"scrapySelect",label:"爬虫实例"}}),r("el-table-column",{attrs:{prop:"scrapyState",label:"爬虫状态"}}),r("el-table-column",{attrs:{label:"数据表",prop:"tableName"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{placeholder:"请选择数据表"},model:{value:t.row.tableName,callback:function(r){e.$set(t.row,"tableName",r)},expression:"scope.row.tableName"}},e._l(e.dbTableList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.dataStore(t.row)}}},[e._v("数据入库")])]}}])})],1),r("el-dialog",{attrs:{title:"数据入库",visible:e.dataStoreVisible,width:"50%"},on:{"update:visible":function(t){e.dataStoreVisible=t},close:function(t){return e.resetForm()}}},[r("el-row",[r("el-col",{attrs:{span:24}},[e._v("爬虫保存数据案例: "+e._s(e.stringInfo))])],1),r("el-form",{ref:"addFormRef",attrs:{model:e.dropInfo,rules:e.addruleForm,"label-width":"100px","margin-top":"3px"}},[e._l(e.dropInfo.items,(function(t,n){return r("el-row",{key:n},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"item.topic",label:"topic列表:","font-size":"60px"}},[r("el-select",{attrs:{placeholder:"请选择topic"},model:{value:e.dropInfo.items[n].topic,callback:function(t){e.$set(e.dropInfo.items[n],"topic",t)},expression:"dropInfo.items[index].topic"}},e._l(e.topics,(function(e,t,n){return r("el-option",{key:n,attrs:{label:t,value:t}})})),1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"item.tableName",label:"数据库列表:"}},[r("el-select",{attrs:{placeholder:"请选择数据库列表"},model:{value:e.dropInfo.items[n].tableName,callback:function(t){e.$set(e.dropInfo.items[n],"tableName",t)},expression:"dropInfo.items[index].tableName"}},e._l(e.tableNames,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),r("el-col",{attrs:{span:"4"}},[0!==n?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.removeNewTag(n)}}}):r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewDrop()}}},[e._v("+")])],1)],1)})),r("el-row",[r("el-col",[e._v("入库定时设置：")]),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.day,callback:function(t){e.$set(e.dropInfo.time,"day",t)},expression:"dropInfo.time.day"}}),r("span",[e._v("天")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.hour,callback:function(t){e.$set(e.dropInfo.time,"hour",t)},expression:"dropInfo.time.hour"}}),r("span",[e._v("时")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.min,callback:function(t){e.$set(e.dropInfo.time,"min",t)},expression:"dropInfo.time.min"}}),r("span",[e._v("分")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.second,callback:function(t){e.$set(e.dropInfo.time,"second",t)},expression:"dropInfo.time.second"}}),r("span",[e._v("秒")])],1)],1)],2),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dataStoreVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataStoreSubmit(e.dropInfo)}}},[e._v("入库")])],1)],1)],1)],1)},M=[],K={data:function(){return{websiteslist:[{websiteName:"websiteName",url:"url",state:"",scrapySelect:"scrapyName",scrapyState:""}],dbTableList:["1","2","3"],dataStoreVisible:!1,stringInfo:"",dropInfo:{websiteName:"",websiteUrl:"",tableName:"",scrapyName:"",items:[{topic:"",tableName:""}],time:{day:"",hour:"",min:"",second:""}},topics:{1:"1","2-topic":"topic"},tableNames:["1","2","3"]}},created:function(){this.getWebsitelist(),this.getDBTableList()},methods:{getWebsitelist:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listWebsites");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取网站列表失败"));case 6:e.websiteslist=n.entity;case 7:case"end":return t.stop()}}),t)})))()},getDBTableList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listDBTableName");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("获取数据列表失败"));case 6:e.dbTableList=n.entity;case 7:case"end":return t.stop()}}),t)})))()},dataStore:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dataStoreVisible=!0,console.log(e),t.dropInfo.tableName=e.tableName,t.dropInfo.scrapyName=e.scrapySelect,t.dropInfo.websiteName=e.websiteName,t.dropInfo.websiteUrl=e.url,n=new URLSearchParams,n.append("scrapyName",e.scrapySelect),r.next=10,t.$http.post("selectTopicByScrapyName",n);case 10:if(a=r.sent,s=a.data,200===s.code){r.next=14;break}return r.abrupt("return",t.$message.error("获取爬虫topic失败"));case 14:return o=new URLSearchParams,o.append("topic",s.entity),r.next=18,t.$http.post("showTopicOneInfo",o);case 18:if(i=r.sent,l=i.data,200===l.code){r.next=22;break}return r.abrupt("return",t.$message.error("根据爬虫获取爬虫实例失败"));case 22:t.stringInfo=l.entity,t.topics=l.entity,t.getTableNames(e.tableName);case 25:case"end":return r.stop()}}),r)})))()},getTableNames:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("tableName",e),r.next=4,t.$http.post("listTableColumn",n);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("获取数据列表失败"));case 8:t.tableNames=s.entity;case 9:case"end":return r.stop()}}),r)})))()},addNewDrop:function(){this.dropInfo.items.push({tableName:"",topic:""})},dataStoreSubmit:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,l,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(console.log(e),n=e.time.second+60*e.time.min+3600*e.time.hour+3600*e.time.day*24,a=e.tableName,s=[],o=[],i=0;i<e.items.length;i++)s.push(e.items[i].tableName),o.push(e.items[i].topic);return l=new URLSearchParams,l.append("tableName",a),l.append("seconds",n),l.append("topicColumns",o),l.append("DBTableColumns",s),l.append("websiteName",e.websiteName),l.append("websiteUrl",e.websiteUrl),l.append("scrapyName",e.scrapyName),r.next=16,t.$http.post("insertKafkaIntoDBTable",l);case 16:if(c=r.sent,u=c.data,200===u.code){r.next=20;break}return r.abrupt("return",t.$message.error("数据库插入失败"));case 20:t.$message.success("数据插入成功");case 21:case"end":return r.stop()}}),r)})))()},removeNewTag:function(e){this.dropInfo.items.pop(e)},resetForm:function(){console.log(this.$refs.addFormRef),this.$refs.addFormRef.resetFields()}}},J=K,G=(r("0e1b"),Object(l["a"])(J,E,M,!1,null,"94584610",null)),H=G.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("网站爬虫")]),r("el-breadcrumb-item",[e._v("数据入库与告警")]),r("el-breadcrumb-item",[e._v("数据告警")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alarmslist,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"dataInfo",label:"错误数据"}}),r("el-table-column",{attrs:{prop:"errorUrl",label:"错误数据所属url"}}),r("el-table-column",{attrs:{prop:"errorSiteName",label:"错误数据所属网站名"}}),r("el-table-column",{attrs:{prop:"errorLog",label:"错误原因"}}),r("el-table-column",{attrs:{prop:"time",label:"时间"}}),r("el-table-column",{attrs:{prop:"additionalInfo",label:"附加信息"}})],1)],1)],1)},X=[],Y={data:function(){return{alarmslist:""}},created:function(){this.getAlarmsList()},methods:{getAlarmsList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listDataErrorList");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("数据告警获取失败"));case 6:e.alarmslist=n.entity;case 7:case"end":return t.stop()}}),t)})))()}}},Z=Y,ee=(r("ab08"),Object(l["a"])(Z,Q,X,!1,null,"817da752",null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("数据库同步配置")])],1),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addScrapyInstance()}}},[e._v("新增同步监听实例")]),r("span",[e._v("|")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.vedioVisible=!0}}},[e._v("教学视频")]),r("el-dialog",{attrs:{title:"教学视频",visible:e.vedioVisible,width:"50%"},on:{"update:visible":function(t){e.vedioVisible=t}}},[r("div",[r("video-player",{attrs:{options:e.playerOptions}})],1)]),r("el-dialog",{attrs:{title:"添加同步监听实例",visible:e.addScrapyInstanceVisible,width:"50%"},on:{"update:visible":function(t){e.addScrapyInstanceVisible=t},close:function(t){return e.resetScrpayInstanceForm()}}},[r("el-form",{ref:"addScrapyInstanceRef",attrs:{model:e.scrapyInstanceInfo,rules:e.addScrapyruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"实例名称",prop:"additionalInfo"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.additionalInfo,callback:function(t){e.$set(e.scrapyInstanceInfo,"additionalInfo",t)},expression:"scrapyInstanceInfo.additionalInfo"}})],1),r("el-form-item",{attrs:{label:"canal-IP"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.serverAddress,callback:function(t){e.$set(e.scrapyInstanceInfo,"serverAddress",t)},expression:"scrapyInstanceInfo.serverAddress"}})],1),r("el-form-item",{attrs:{label:"canal-Port"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.port,callback:function(t){e.$set(e.scrapyInstanceInfo,"port",t)},expression:"scrapyInstanceInfo.port"}})],1),r("el-form-item",{attrs:{label:"canal-监控队列名称"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.destination,callback:function(t){e.$set(e.scrapyInstanceInfo,"destination",t)},expression:"scrapyInstanceInfo.destination"}})],1),r("el-form-item",{attrs:{label:"Kafka-Topic名称"}},[r("el-input",{model:{value:e.scrapyInstanceInfo.topic,callback:function(t){e.$set(e.scrapyInstanceInfo,"topic",t)},expression:"scrapyInstanceInfo.topic"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addScrapyInstanceVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDBInstanceSubmit()}}},[e._v("添加")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.canals,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"additionalInfo",label:"实例名称"}}),r("el-table-column",{attrs:{prop:"serverAddress",label:"canal-Ip"}}),r("el-table-column",{attrs:{prop:"port",label:"canal-Port"}}),r("el-table-column",{attrs:{prop:"destination",label:"监控队列名称"}}),r("el-table-column",{attrs:{prop:"topic",label:"Kafka-Topic"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editScrapyInstance(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteScrapyInstance(t.row)}}})]}}])})],1)],1)],1)},ne=[],ae={data:function(){return{canals:"",vedioVisible:!1,addScrapyInstanceVisible:!1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,controls:!0,preload:"auto",muted:!1,loop:!1,language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:"http://localhost:8080/file/video"}],width:document.documentElement.clientWidth,notSupportedMessage:"此视频暂无法播放，请稍后再试"},scrapyInstanceInfo:{additionalInfo:"1",serverAddress:"2",port:"3",destination:"4",topic:"5"},addScrapyruleForm:{additionalInfo:[{required:!0,message:"请输入新增同步监听实例名称",trigger:"blur"}]}}},created:function(){this.getCanalList()},methods:{getCanalList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listCanal");case 2:if(r=t.sent,n=r.data,console.log(n),200===n.code){t.next=7;break}return t.abrupt("return",e.$message.error("数据库同步实例获取失败"));case 7:e.canals=n.entity;case 8:case"end":return t.stop()}}),t)})))()},addScrapyInstance:function(){this.addScrapyInstanceVisible=!0},editScrapyInstance:function(e){console.log(e)},deleteScrapyInstance:function(e){console.log(e)},resetScrpayInstanceForm:function(){this.$refs.addScrapyInstanceRef.resetFields()},addDBInstanceSubmit:function(){var e=this;this.$refs.addScrapyInstanceRef.validate(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("addCanal",e.scrapyInstanceInfo);case 4:if(n=t.sent,a=n.data,200===a.code){t.next=8;break}return t.abrupt("return",e.$message.error("同步监听实例添加失败"));case 8:e.$message.success("监听实例添加成功"),e.getCanalList(),e.addScrapyInstanceVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},se=ae,oe=(r("9cea"),Object(l["a"])(se,re,ne,!1,null,"17b9e35f",null)),ie=oe.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("远程数据库")]),r("el-breadcrumb-item",[e._v("数据入库与告警")]),r("el-breadcrumb-item",[e._v("数据告警")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alarmslist,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"errorInfo",label:"告警名称"}}),r("el-table-column",{attrs:{prop:"sqlInfo",label:"sql告警语句"}}),r("el-table-column",{attrs:{prop:"destination",label:"监控队列"}}),r("el-table-column",{attrs:{prop:"errorTime",label:"告警时间"}})],1)],1)],1)},ce=[],ue={data:function(){return{alarmslist:""}},created:function(){this.getAlarmsList()},methods:{getAlarmsList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listCanalDataErrorList");case 2:if(r=t.sent,n=r.data,200===n.code){t.next=6;break}return t.abrupt("return",e.$message.error("canal同步告警信息获取失败"));case 6:e.alarmslist=n.entity;case 7:case"end":return t.stop()}}),t)})))()}}},pe=ue,de=(r("e89f"),Object(l["a"])(pe,le,ce,!1,null,"3df459d4",null)),me=de.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("采集设备管理")]),r("el-breadcrumb-item",[e._v("远程数据库")]),r("el-breadcrumb-item",[e._v("数据入库与告警")]),r("el-breadcrumb-item",[e._v("数据入库")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.canalList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"additionalInfo",label:"实例名称"}}),r("el-table-column",{attrs:{prop:"serverAddress",label:"canal-Ip"}}),r("el-table-column",{attrs:{prop:"port",label:"canal-Port"}}),r("el-table-column",{attrs:{prop:"destination",label:"监控队列名称"}}),r("el-table-column",{attrs:{prop:"topic",label:"Kafka-Topic"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{content:"启动实例",placement:"top"}},[r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-switch-button"},on:{click:function(r){return e.openInstance(t.row)}}})],1),r("el-tooltip",{attrs:{content:"数据同步",placement:"top"}},[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(r){return e.dataStore(t.row)}}})],1),r("el-tooltip",{attrs:{content:"停止同步",placement:"top"}},[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-circle-close"},on:{click:function(r){return e.stopInstance(t.row)}}})],1)]}}])})],1),r("el-dialog",{attrs:{title:"数据同步",visible:e.dataStoreVisible,width:"50%"},on:{"update:visible":function(t){e.dataStoreVisible=t},close:function(t){return e.resetForm()}}},[r("el-form",{ref:"addFormRef",attrs:{model:e.dropInfo,rules:e.addruleForm,"label-width":"100px","margin-top":"3px"}},[e._l(e.dropInfo.tableList,(function(t,n){return r("el-card",{key:n,staticStyle:{margin:"2px"}},[0!==n?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.removeNewTag(n)}}}):r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addNewDrop()}}},[e._v("+")]),r("el-form-item",{attrs:{prop:"item.tableName",label:"同步表名:"}},[r("el-input",{attrs:{placeholder:"请输入同步表名"},model:{value:e.dropInfo.tableList[n].tableName,callback:function(t){e.$set(e.dropInfo.tableList[n],"tableName",t)},expression:"dropInfo.tableList[index].tableName"}})],1),r("el-form-item",{attrs:{prop:"item.syncOperate",label:"同步操作"}},[r("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.dropInfo.tableList[n].syncOperate,callback:function(t){e.$set(e.dropInfo.tableList[n],"syncOperate",t)},expression:"dropInfo.tableList[index].syncOperate"}},[r("el-checkbox",{attrs:{label:"1",border:""}},[e._v("创建表")]),r("el-checkbox",{attrs:{label:"2",border:""}},[e._v("删除表")]),r("el-checkbox",{attrs:{label:"3",border:""}},[e._v("插入记录")]),r("el-checkbox",{attrs:{label:"4",border:""}},[e._v("更新记录")]),r("el-checkbox",{attrs:{label:"5",border:""}},[e._v("删除记录")])],1)],1)],1)})),r("el-row",[r("el-col",[e._v("同步定时设置：")]),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.day,callback:function(t){e.$set(e.dropInfo.time,"day",t)},expression:"dropInfo.time.day"}}),r("span",[e._v("天")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.hour,callback:function(t){e.$set(e.dropInfo.time,"hour",t)},expression:"dropInfo.time.hour"}}),r("span",[e._v("时")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.min,callback:function(t){e.$set(e.dropInfo.time,"min",t)},expression:"dropInfo.time.min"}}),r("span",[e._v("分")])],1),r("e-col",[r("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:e.dropInfo.time.second,callback:function(t){e.$set(e.dropInfo.time,"second",t)},expression:"dropInfo.time.second"}}),r("span",[e._v("秒")])],1)],1)],2),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dataStoreVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataStoreSubmit(e.dropInfo)}}},[e._v("同步")])],1)],1)],1)],1)},be=[],he={data:function(){return{canalList:[{topic:"1"}],dataStoreVisible:!1,stringInfo:"",dropInfo:{tableList:[{tableName:"同步表名",syncOperate:[]}],topic:"",time:{day:"",hour:"",min:"",second:""}}}},created:function(){this.getCanalList(),this.getDBTableList()},methods:{getCanalList:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("listCanal");case 2:if(r=t.sent,n=r.data,console.log(n),200===n.code){t.next=7;break}return t.abrupt("return",e.$message.error("数据库同步实例获取失败"));case 7:e.canalList=n.entity;case 8:case"end":return t.stop()}}),t)})))()},dataStore:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.dataStoreVisible=!0,console.log(e),t.dropInfo.topic=e.topic;case 3:case"end":return r.stop()}}),r)})))()},dataStoreSubmit:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.time.second+60*e.time.min+3600*e.time.hour+3600*e.time.day*24,a={},a.seconds=n,a.topic=e.topic,a.tableList=e.tableList,console.log(a),r.next=8,t.$http.post("addConsumer",a);case 8:if(s=r.sent,o=s.data,200===o.code){r.next=12;break}return r.abrupt("return",t.$message.error("数据库同步失败"));case 12:t.$message.success("数据同步成功");case 13:case"end":return r.stop()}}),r)})))()},resetForm:function(){console.log(this.$refs.addFormRef),this.$refs.addFormRef.resetFields()},openInstance:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$http.post("startCanalInstance",e);case 3:if(n=r.sent,a=n.data,200===a.code){r.next=7;break}return r.abrupt("return",t.$message.error("实例启动失败"));case 7:t.$message.success("实例启动成功");case 8:case"end":return r.stop()}}),r)})))()},stopInstance:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=new URLSearchParams,n.append("topic",e.topic),r.next=4,t.$http.post("stopKafkaConsumer",n);case 4:if(a=r.sent,s=a.data,200===s.code){r.next=8;break}return r.abrupt("return",t.$message.error("停止同步失败"));case 8:return r.abrupt("return",t.$message.success("停止同步成功"));case 9:case"end":return r.stop()}}),r)})))()},removeNewTag:function(e){this.dropInfo.tableList.pop(e)},addNewDrop:function(){this.dropInfo.tableList.push({tableName:"",syncOperate:[]})}}},ye=he,ve=(r("1f18"),Object(l["a"])(ye,fe,be,!1,null,"644a9fa2",null)),ge=ve.exports;n["default"].use(p["a"]);var we=[{path:"/",component:y,redirect:"/welcome",children:[{path:"/deviceManger",component:S},{path:"/websitesManger",component:F},{path:"fileUploadAndDownload",component:T},{path:"/welcome",component:D["default"]},{path:"/scrapyconfig",component:A},{path:"/dataStore",component:H},{path:"/dataAlarm",component:te},{path:"/DBconfig",component:ie},{path:"/DBStore",component:ge},{path:"/DBAlarm",component:me}]}],Ie=new p["a"]({routes:we}),xe=Ie,ke=r("5c96"),Se=r.n(ke),_e=r("d6d3"),$e=r.n(_e);r("0fae");n["default"].use($e.a),n["default"].use(Se.a),n["default"].prototype.$message=ke["Message"],n["default"].prototype.$confirm=ke["MessageBox"].confirm;var Oe=r("bc3a"),Re=r.n(Oe);r("aede");r("fda2"),r("451f"),n["default"].config.productionTip=!1,Re.a.defaults.baseURL="http://localhost:8080/",Re.a.interceptors.request.use((function(e){return console.log(e),e.headers.Authorization=window.sessionStorage.getItem("token"),e})),n["default"].prototype.$http=Re.a,n["default"].config.productionTip=!1,new n["default"]({router:xe,render:function(e){return e(u)}}).$mount("#app")},"57c2":function(e,t,r){},"6d14":function(e,t,r){"use strict";r("7070")},7070:function(e,t,r){},"7f00":function(e,t,r){"use strict";var n=r("89fd"),a=r.n(n);t["default"]=a.a},"83a1":function(e,t,r){},"89fd":function(e,t){},"8f40":function(e,t,r){},"929f":function(e,t,r){"use strict";r("c40b")},"9a92":function(e,t,r){},"9cea":function(e,t,r){"use strict";r("a51b")},"9e40":function(e,t,r){"use strict";r("57c2")},a51b:function(e,t,r){},ab08:function(e,t,r){"use strict";r("83a1")},aede:function(e,t,r){},c40b:function(e,t,r){},ccd6:function(e,t,r){},d844:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"welcome"})},a=[]},dc69:function(e,t,r){},e89f:function(e,t,r){"use strict";r("ccd6")}});
//# sourceMappingURL=app.7cbaea4d.js.map